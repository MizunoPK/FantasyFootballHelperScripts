Before starting changes, ask clarifying questions by creating a questions file in the potential_updates folder. The questions file should be named with the pattern: `{objective_name}_questions.md`. This file should contain all clarifying questions that would help better understand and complete the objective. Wait for the user to answer these questions before creating the TODO file and beginning development. If new questions arise during development, pause and add them to the questions file.
After receiving answers to clarifying questions, create a TODO file that maps out all the tasks that will need to be completed to accomplish this objective. As you complete the tasks, keep the file updated with your progress just in case a new Claude agent in a new session needs to finish the work. Ensure this TODO file has everything it needs to maintain consistent work - including a note about keeping the file up to date on progress made. Put the TODO file in the todo-files folder in the potential_updates directory.
After updates are complete, verify that all unit tests still pass and test the system to ensure it is functional. Test ALL unit tests across the entire repo. All tests across the entire repo must pass before we can mark an objective as complete. Make this a very clear and important TODO item.
Create any new unit tests to cover the new implementations, and modify any relevant unit tests and test them to ensure they pass.
Update rules files and readme files according to the new changes.
Once the objective is completely done, then move the associated file in potential_updates to the 'done' folder contained within the same potential_updates directory. Also delete the questions file once the objective is complete.
Be VERY systematic when creating the TODO file and proceeding with the implementation. Break the objective up into modualized components. Each phase that is outlined in the todo file should leave the repo is a state that is still testable and functional, and should run the pre-commit checklist in its entirety. Do not skip any unit tests or interactive integration tests just because you think that the tests will not be effected by the change - assume everything is at risk of breaking no matter what you do.

## PRE-COMMIT VALIDATION PROTOCOL

**ðŸš¨ MANDATORY FOR EVERY STAGE COMPLETION** - This protocol must be executed at the completion of EVERY phase, step, or significant change before proceeding to the next stage:

### **WHEN TO EXECUTE**:
- âœ… After completing ANY phase step (e.g., Phase 2 Step 2.1)
- âœ… Before moving to the next phase or step
- âœ… When instructed to "validate and commit" or "commit changes"
- âœ… At any major milestone or completion point
- âœ… Before asking user for validation to proceed

### **MANDATORY EXECUTION STEPS**:

1. **COPY VALIDATION CHECKLIST**:
   ```bash
   cp tests/pre_commit_validation_checklist.md tests/temp_commit_checklist.md
   ```

2. **EXECUTE ALL VALIDATION STEPS SYSTEMATICALLY**:
   - Step 1: Analyze ALL changed files (git status, git diff)
   - Step 2: Add unit tests for new functionality with proper mocking
   - Step 3: Run entire repository test suite (100% pass rate required)
   - Step 4: Execute full integration testing (all 23 draft helper validation steps)
   - Step 5: Update documentation (README, CLAUDE.md, rules files) as needed
   - Step 6: Commit changes with proper format
   - Step 7: Cleanup temporary files

3. **STARTUP VALIDATION MANDATORY**: Must verify core applications start without errors:
   ```bash
   # Test player data fetcher startup (should load config without errors)
   timeout 10 python run_player_data_fetcher.py

   # Test NFL scores fetcher startup (should load config without errors)
   timeout 10 python run_nfl_scores_fetcher.py
   ```

   **Startup Requirements:**
   - âœ… Player data fetcher starts without import/config errors
   - âœ… NFL scores fetcher starts without import/config errors
   - âœ… All required modules load properly
   - âœ… Configuration files parse without errors

4. **INTEGRATION TESTING MANDATORY**: Must execute all 23 steps from `draft_helper_validation_checklist.md`:
   ```bash
   cp tests/draft_helper_validation_checklist.md tests/temp_integration_checklist.md
   echo -e "2\nHunt\n6\nexit\n3\n\n4\nHunt\n1\ny\nHampton\n1\ny\nexit\n1\n1\n5\n15\ny\n16\n3\n\n5\n15\ny\n16\n6\n\n7\n" | python run_draft_helper.py
   ```

   **Verify:**
   - âœ… FLEX system working correctly (WR 4/4, FLEX 1/1)
   - âœ… CSV data persistence functioning
   - âœ… Point calculations accurate across all modes
   - âœ… All 7 menu options accessible and functional

5. **UNIT TEST VALIDATION**:
   ```bash
   python -m pytest --tb=short  # Must be 100% pass rate
   python -m pytest tests/ shared_files/tests/ draft_helper/tests/ starter_helper/tests/ -v
   ```

6. **COMMIT STANDARDS**:
   - Format: "Complete Phase X Step Y: [description] - [brief summary]"
   - NO icons, emojis, or Claude references
   - Do NOT commit checklist files
   - Only commit when ALL validations pass

7. **CLEANUP REQUIRED**:
   ```bash
   rm tests/temp_commit_checklist.md
   rm tests/temp_integration_checklist.md
   ```

### **FAILURE PROTOCOL**:
- **If ANY step fails**: STOP immediately, fix the issue, restart validation from Step 1
- **If integration tests fail**: Debug the specific failure, fix code, re-run full validation
- **If unit tests fail**: Fix failing tests, ensure 100% pass rate before proceeding
- **No exceptions**: Cannot proceed to next stage without 100% validation success

### **ENFORCEMENT**:
- This protocol is MANDATORY and NON-NEGOTIABLE for every stage completion
- Violation of this protocol requires immediate correction and re-validation
- The user should be notified if this protocol was not followed properly 